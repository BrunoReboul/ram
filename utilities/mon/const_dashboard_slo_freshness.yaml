displayName: SLO <slo_target_tittle>% of gcp configuration <origin_title> are analyzed in less than <threshold_tittle>
mosaicLayout:
  columns: 12
  tiles:
    - height: 2
      width: 2
      widget:
        title: Last <aggregation_window_tittle> achievements
        text:
          content: Used as the reference aggregation window for this SLO
          format: RAW
    - height: 2
      width: 2
      xPos: 2
      widget:
        title: SLI vs SLO
        scorecard:
          gaugeView:
            upperBound: 1.0
          thresholds:
            - color: RED
              direction: BELOW
              value: 0.9
          timeSeriesQuery:
            timeSeriesQueryLanguage: |-
              fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
              | filter metric.microservice_name == 'stream2bq'
              | filter metric.origin == 'batch-export'
              | align delta(28d)
              | every 28d
              | within 28d
              | group_by [metric.microservice_name]
              | fraction_less_than_from 7415
    - height: 2
      width: 3
      xPos: 4
      widget:
        title: Remaining ERROR BUDGET
        scorecard:
          thresholds:
            - color: YELLOW
              direction: BELOW
              value: 0.1
          timeSeriesQuery:
            timeSeriesQueryLanguage: |-
              fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
              | filter metric.microservice_name == 'stream2bq'
              | filter metric.origin == 'batch-export'
              | align delta(28d)
              | every 28d
              | within 28d
              | group_by [metric.microservice_name]
              | fraction_less_than_from 7415
              | neg
              | add 1
              | div 0.1
              | neg
              | add 1
    - height: 3
      widget:
        title: Error budget burnrate on 7d sliding windows - Email when > 1.5
        xyChart:
          chartOptions:
            mode: COLOR
          dataSets:
            - plotType: LINE
              timeSeriesQuery:
                timeSeriesQueryLanguage: |-
                  fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
                  |filter metric.microservice_name == 'stream2bq'
                  | filter metric.origin == 'batch-export'
                  | align delta(1m)
                  | every 1m
                  | group_by [metric.microservice_name], sliding(7d)
                  | fraction_less_than_from 7415
                  | neg
                  | add 1
                  | div 0.1
                  | cast_units "1"
          thresholds:
            - value: 1.5
          timeshiftDuration: 0s
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 9
      yPos: 2
    - height: 2
      widget:
        scorecard:
          timeSeriesQuery:
            timeSeriesQueryLanguage: |-
              fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
              | filter metric.microservice_name == 'stream2bq'
              | filter metric.origin == 'batch-export'
              | align delta(28d)
              | every 28d
              | within 28d
              | group_by [metric.microservice_name]
              | count_from
        title: Number of config. analyzed
      width: 2
      xPos: 7
    - height: 3
      widget:
        title: Error budget burnrate on 12h sliding windows - Alert when > 3
        xyChart:
          chartOptions:
            mode: COLOR
          dataSets:
            - plotType: LINE
              timeSeriesQuery:
                timeSeriesQueryLanguage: |-
                  fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
                  |filter metric.microservice_name == 'stream2bq'
                  | filter metric.origin == 'batch-export'
                  | align delta(1m)
                  | every 1m
                  | group_by [metric.microservice_name], sliding(1h)
                  | fraction_less_than_from 7415
                  | neg
                  | add 1
                  | div 0.1
                  | cast_units "1"
          thresholds:
            - value: 3.0
          timeshiftDuration: 0s
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 9
      yPos: 5
    - height: 3
      widget:
        title: Error budget burnrate on 12h sliding windows - Alert when > 3
        xyChart:
          chartOptions:
            mode: COLOR
          dataSets:
            - plotType: LINE
              timeSeriesQuery:
                timeSeriesQueryLanguage: |-
                  fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
                  |filter metric.microservice_name == 'stream2bq'
                  | filter metric.origin == 'batch-export'
                  | align delta(1m)
                  | every 1m
                  | group_by [metric.microservice_name], sliding(1h)
                  | fraction_less_than_from 7415
                  | neg
                  | add 1
                  | div 0.1
                  | cast_units "1"
          thresholds:
            - value: 9.0
          timeshiftDuration: 0s
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 9
      yPos: 8
    - height: 11
      widget:
        title: Last 28days heatmap
        xyChart:
          chartOptions:
            mode: COLOR
          dataSets:
            - plotType: HEATMAP
              timeSeriesQuery:
                timeSeriesQueryLanguage: |-
                  fetch cloud_function::logging.googleapis.com/user/ram_latency_e2e
                  | filter (metric.microservice_name == 'stream2bq')
                  | filter metric.origin == 'batch-export'
                  | align delta(28d)
                  | every 28d
                  | within 28d
                  | group_by [metric.microservice_name]
                  | graph_period 28d
          thresholds:
            - value: 7415.0
          timeshiftDuration: 0s
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 3
      xPos: 9
name: projects/225556790442/dashboards/2caf30a7-24ca-48b5-a53b-b237d9d793f6
